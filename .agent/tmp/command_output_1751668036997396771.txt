[{"table": "server_metrics", "schema": "CREATE TABLE [server_metrics] (\n   [id] TEXT PRIMARY KEY,\n   [timestamp] TEXT,\n   [model] TEXT,\n   [duration] FLOAT,\n   [tokens] INTEGER,\n   [success] INTEGER,\n   [error] TEXT\n)"},
 {"table": "consortium_configs", "schema": "CREATE TABLE consortium_configs (\n            name TEXT PRIMARY KEY,\n            config TEXT NOT NULL,\n            created_at TEXT DEFAULT CURRENT_TIMESTAMP\n        )"},
 {"table": "_llm_migrations", "schema": "CREATE TABLE [_llm_migrations] (\n   [name] TEXT PRIMARY KEY,\n   [applied_at] TEXT\n)"},
 {"table": "conversations", "schema": "CREATE TABLE [conversations] (\n   [id] TEXT PRIMARY KEY,\n   [name] TEXT,\n   [model] TEXT\n)"},
 {"table": "attachments", "schema": "CREATE TABLE [attachments] (\n   [id] TEXT PRIMARY KEY,\n   [type] TEXT,\n   [path] TEXT,\n   [url] TEXT,\n   [content] BLOB\n)"},
 {"table": "prompt_attachments", "schema": "CREATE TABLE [prompt_attachments] (\n   [response_id] TEXT REFERENCES [responses]([id]),\n   [attachment_id] TEXT REFERENCES [attachments]([id]),\n   [order] INTEGER,\n   PRIMARY KEY ([response_id], [attachment_id])\n)"},
 {"table": "feedback", "schema": "CREATE TABLE feedback (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        response_id TEXT NOT NULL,\n        datetime_utc TIMESTAMP DEFAULT (strftime('%Y-%m-%d %H:%M:%f', 'now')),\n        feedback TEXT NOT NULL,\n        comment TEXT\n    )"},
 {"table": "sqlite_sequence", "schema": "CREATE TABLE sqlite_sequence(name,seq)"},
 {"table": "temp_import", "schema": "CREATE TABLE \"temp_import\"(\n\"-- Exporting data from responses table\" TEXT)"},
 {"table": "schemas", "schema": "CREATE TABLE [schemas] (\n   [id] TEXT PRIMARY KEY,\n   [content] TEXT\n)"},
 {"table": "responses_fts_data", "schema": "CREATE TABLE 'responses_fts_data'(id INTEGER PRIMARY KEY, block BLOB)"},
 {"table": "responses_fts_idx", "schema": "CREATE TABLE 'responses_fts_idx'(segid, term, pgno, PRIMARY KEY(segid, term)) WITHOUT ROWID"},
 {"table": "responses_fts_docsize", "schema": "CREATE TABLE 'responses_fts_docsize'(id INTEGER PRIMARY KEY, sz BLOB)"},
 {"table": "responses_fts_config", "schema": "CREATE TABLE 'responses_fts_config'(k PRIMARY KEY, v) WITHOUT ROWID"},
 {"table": "classifications", "schema": "CREATE TABLE [classifications] (\n   [id] INTEGER PRIMARY KEY,\n   [content] TEXT,\n   [class] TEXT,\n   [model] TEXT,\n   [temperature] FLOAT,\n   [datetime_utc] TEXT,\n   [response_json] TEXT,\n   [confidence] FLOAT\n)"},
 {"table": "fragments", "schema": "CREATE TABLE [fragments] (\n   [id] INTEGER PRIMARY KEY,\n   [hash] TEXT,\n   [content] TEXT,\n   [datetime_utc] TEXT,\n   [source] TEXT\n)"},
 {"table": "fragment_aliases", "schema": "CREATE TABLE [fragment_aliases] (\n   [alias] TEXT PRIMARY KEY,\n   [fragment_id] INTEGER REFERENCES [fragments]([id])\n)"},
 {"table": "prompt_fragments", "schema": "CREATE TABLE \"prompt_fragments\" (\n   [response_id] TEXT REFERENCES [responses]([id]),\n   [fragment_id] INTEGER REFERENCES [fragments]([id]),\n   [order] INTEGER,\n   PRIMARY KEY ([response_id], [fragment_id], [order])\n)"},
 {"table": "system_fragments", "schema": "CREATE TABLE \"system_fragments\" (\n   [response_id] TEXT REFERENCES [responses]([id]),\n   [fragment_id] INTEGER REFERENCES [fragments]([id]),\n   [order] INTEGER,\n   PRIMARY KEY ([response_id], [fragment_id], [order])\n)"},
 {"table": "consortium_runs", "schema": "CREATE TABLE [consortium_runs] (\n   [run_id] TEXT PRIMARY KEY,\n   [start_timestamp] TEXT,\n   [end_timestamp] TEXT,\n   [status] TEXT,\n   [original_prompt] TEXT,\n   [consortium_config] TEXT,\n   [final_synthesis] TEXT,\n   [iterations_performed] INTEGER,\n   [final_confidence] FLOAT,\n   [error_message] TEXT\n)"},
 {"table": "consortium_iterations", "schema": "CREATE TABLE [consortium_iterations] (\n   [iteration_id] INTEGER PRIMARY KEY,\n   [run_id] TEXT REFERENCES [consortium_runs]([run_id]),\n   [iteration_number] INTEGER,\n   [arbiter_response_id] TEXT REFERENCES [responses]([id]),\n   [arbiter_parsed_confidence] FLOAT,\n   [arbiter_parsed_needs_iteration] INTEGER\n)"},
 {"table": "consortium_iteration_responses", "schema": "CREATE TABLE [consortium_iteration_responses] (\n   [iteration_id] INTEGER REFERENCES [consortium_iterations]([iteration_id]),\n   [response_id] TEXT REFERENCES [responses]([id]),\n   PRIMARY KEY ([iteration_id], [response_id])\n)"},
 {"table": "tools", "schema": "CREATE TABLE [tools] (\n   [id] INTEGER PRIMARY KEY,\n   [hash] TEXT,\n   [name] TEXT,\n   [description] TEXT,\n   [input_schema] TEXT\n, [plugin] TEXT)"},
 {"table": "tool_responses", "schema": "CREATE TABLE [tool_responses] (\n   [tool_id] INTEGER REFERENCES [tools]([id]),\n   [response_id] TEXT REFERENCES [responses]([id]),\n   PRIMARY KEY ([tool_id], [response_id])\n)"},
 {"table": "tool_calls", "schema": "CREATE TABLE [tool_calls] (\n   [id] INTEGER PRIMARY KEY,\n   [response_id] TEXT REFERENCES [responses]([id]),\n   [tool_id] INTEGER REFERENCES [tools]([id]),\n   [name] TEXT,\n   [arguments] TEXT,\n   [tool_call_id] TEXT\n)"},
 {"table": "tool_instances", "schema": "CREATE TABLE [tool_instances] (\n   [id] INTEGER PRIMARY KEY,\n   [plugin] TEXT,\n   [name] TEXT,\n   [arguments] TEXT\n)"},
 {"table": "tool_results", "schema": "CREATE TABLE \"tool_results\" (\n   [id] INTEGER PRIMARY KEY,\n   [response_id] TEXT REFERENCES [responses]([id]),\n   [tool_id] INTEGER REFERENCES [tools]([id]),\n   [name] TEXT,\n   [output] TEXT,\n   [tool_call_id] TEXT,\n   [instance_id] INTEGER REFERENCES [tool_instances]([id])\n, [exception] TEXT)"},
 {"table": "responses_fts", "schema": "CREATE VIRTUAL TABLE [responses_fts] USING FTS5 (\n    [prompt], [response],\n    content=[responses]\n)"},
 {"table": "responses", "schema": "CREATE TABLE \"responses\" (\n\t\"id\"\tTEXT,\n\t\"model\"\tTEXT,\n\t\"prompt\"\tTEXT,\n\t\"system\"\tTEXT,\n\t\"prompt_json\"\tTEXT,\n\t\"options_json\"\tBLOB,\n\t\"response\"\tTEXT,\n\t\"response_json\"\tTEXT,\n\t\"conversation_id\"\tTEXT,\n\t\"duration_ms\"\tINTEGER,\n\t\"datetime_utc\"\tTEXT,\n\t\"input_tokens\"\tINTEGER,\n\t\"output_tokens\"\tINTEGER,\n\t\"token_details\"\tTEXT,\n\t\"session_id\"\tINTEGER,\n\t\"schema_id\"\tTEXT,\n\t\"consortium_id\"\tTEXT,\n\t\"is_arbiter_response\"\tINTEGER DEFAULT 0,\n\t\"consortium_group_id\"\tTEXT, [resolved_model] TEXT,\n\tPRIMARY KEY(\"id\"),\n\tFOREIGN KEY(\"conversation_id\") REFERENCES \"conversations\"(\"id\"),\n\tFOREIGN KEY(\"schema_id\") REFERENCES \"schemas\"(\"id\")\n)"},
 {"table": "tool_results_attachments", "schema": "CREATE TABLE [tool_results_attachments] (\n   [tool_result_id] INTEGER REFERENCES [tool_results]([id]),\n   [attachment_id] TEXT REFERENCES [attachments]([id]),\n   [order] INTEGER,\n   PRIMARY KEY ([tool_result_id], [attachment_id])\n)"}]
